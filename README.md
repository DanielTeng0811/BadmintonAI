# BadmintonAI

羽球個人化 Dashboard 專題 — 研究計畫
一、研究動機
羽球比賽數據分析通常只停留在比分與基本統計，缺乏對個別球員的深入戰術洞察。對於選手與教練來說，能即時檢視「發球方式比例」、「殺球得分率」、「面對特定情境下的回擊選擇」等資訊，能幫助制定更具體的戰術計畫。
因此，本專題目標是建立一個 Personalized Dashboard，讓使用者能以自然語言提問，系統自動計算並回應相關數據，並透過圖表視覺化呈現。
________________________________________
二、研究問題
我們希望回答的問題可分為 簡單問題 與 進階問題：
•	簡單問題（單一維度，固定公式即可處理）：
o	「周天成的球種分布？」
o	「Kento Momota 的發球失誤率是多少？」
o	「我第一局的非受迫性失誤率？」
•	進階問題（多條件或序列，需要更靈活計算）：
o	「當對手殺球時，我的下一拍回擊比例？」
o	「決勝局 11 分之後，我直線殺 vs 斜線殺的得分率差多少？」
o	「對手連續兩拍壓後場時，我的第三拍回球落點分布？」
________________________________________
三、資料設計
為了支援各種查詢，我們採用 stroke-level（逐拍資料） 的格式，每一列代表一拍。
必備欄位
•	基本資訊：match_id, game_no, rally_id, stroke_no, date
•	球員資訊：player, opponent, server
•	動作描述：shot_type (smash, clear, drop, serve...)
•	落點：landing_zone（前/中/後 × 左/中/右 = 九宮格）
•	失誤：error_type (none, forced, unforced)
•	結果：rally_winner
衍生欄位（計算產生）
•	is_serve（發球判斷）
•	is_receive（接發判斷）
•	is_long_rally（長回合標記，如 ≥13 拍）
此設計能同時處理「單=一比例統計」與「序列情境分析」。
________________________________________
四、方法設計 — 我要怎麼做
(A) Retrieval 模板設計
步驟：
1.	挑常見問題：先列出 5–10 個最常見的需求（例：發球失誤率、球種分布、非受迫性失誤率、殺球得分率、接殺回擊分布）。
2.	定義公式：把每個問題對應的數學公式寫下來，例如：
o	發球失誤率 = 發球失誤次數 ÷ 總發球次數
o	殺球得分率 = 殺球得分的回合數 ÷ 殺球總回合數
3.	寫查詢邏輯：用 Pandas/SQL 先實作一個函式，輸入「球員名字 + 條件」就能輸出數字。
4.	接上畫圖模組：定義每個問題預設的圖表型態（圓餅圖/長條圖/熱區圖）。
👉 結果：你會有一個「問題 → 公式 → 圖表」的字典表。
________________________________________
(B) Code Generation 模組
步驟：
1.	挑一些複雜問題（Retrieval 無法處理的）
o	例：「決勝局 11 分後，我直線殺與斜線殺的得分率比較？」
2.	設計 prompt：告訴 LLM 只能用哪些函式庫（例如 Pandas + Matplotlib），並給他欄位說明。
3.	讓 LLM 產生程式碼：輸入問題 → 產生可執行程式碼 → 系統執行 → 輸出結果。
4.	加檢查機制：
o	檢查分母是否 0
o	檢查比例是否在 0–1
o	檢查加總是否≈100%
o	如果失敗，回傳「無法回答/資料不足」
👉 結果：你可以回答 Retrieval 覆蓋不到的問題。
________________________________________
(C) 結果驗證機制
步驟：
1.	數值驗證：所有比例必須在 0–100%
2.	樣本驗證：如果樣本數 < 10，標記「樣本太少」
3.	雙重驗證：同一問題可用模板 + 程式碼都跑一次，差異太大 → 提醒使用者
4.	人工檢查輔助：隨機展示 3–5 筆原始數據給使用者 spot-check
👉 結果：避免 LLM 幻覺，確保數字可靠。
________________________________________
五、系統流程 — 我該怎麼建
1.	前端界面
o	可以用 Streamlit（最簡單）或 Flask/Gradio
o	功能：一個輸入框（輸入問題），一個輸出區（顯示數字 + 圖表 + 方法解釋）
2.	後端處理
o	步驟 1：語言解析
	規則判斷：問題包含「比例」、「分布」→ Retrieval
	其他複雜問句 → Code Generation
o	步驟 2：執行查詢/程式碼
o	步驟 3：驗證檢查
o	步驟 4：生成回答卡片（數字、圖表、方法、樣本數）
3.	資料庫/資料表
o	先存成 CSV → 用 Pandas 分析
o	若數據很大，再考慮 SQLite/MySQL
________________________________________
六、系統評估 — 我該怎麼驗證好壞
1.	準備測試題庫
o	10 個簡單問題（Retrieval）
o	10 個複雜問題（Code Gen）
o	確認系統都能跑出合理答案
2.	人工比對
o	人工手算幾題（例如發球失誤率），比對系統結果是否一致
3.	可解率
o	總共 20 題，至少能正確回答 80% 以上
4.	解釋完整性
o	每個答案必須包含：
	數字/比例
	圖表
	样本數
	計算方法
5.	使用者測試（如果有隊友/同學）
o	給一組資料，讓他們自己提問，看能否得到清楚答案
________________________________________
七、時間規劃（建議 8 週）
•	第 1–2 週：資料收集與清理，建立 stroke-level 資料表
•	第 3–4 週：設計 Retrieval 模板（至少 3 種：球種分布、發球失誤率、回擊分布）
•	第 5 週：建立基礎 Dashboard（前端可用 Streamlit/Gradio）
•	第 6 週：導入 Code Generation 模組，支援複雜問題
•	第 7 週：加入驗證與交叉檢查機制
•	第 8 週：測試 Demo 問題集，整理成果與報告
________________________________________
八、研究貢獻
•	設計出 羽球專屬資料 Schema，可擴展到其他球類。
•	提供 Retrieval + Code Generation 混合問答架構，兼顧穩定性與靈活性。
•	建立 可視化 Dashboard，讓使用者能以自然語言獲得個人化戰術洞察。
•	驗證 LLM 在運動數據分析上的可行性與限制。
